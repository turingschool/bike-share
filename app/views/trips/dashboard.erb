<h1>Trip Analytics</h1>

<div>
  <p><b>Average duration of a ride:</b> <%= Trip.avg_duration_of_a_ride %> minutes</p>
  <p><b>Longest ride:</b> <%= Trip.longest_ride %> hours</p>
  <p><b>Shortest ride:</b> <%= Trip.shortest_ride %> seconds</p>
  <p><b>Station with the most rides as a starting place:</b> <%= (Trip.station_with_most_ride_starts) %></p>
  <p><b>Station with the most rides as an ending place:</b> <%= (Trip.station_with_most_rides_ends) %></p>
  <p><b>Month by Month breakdown of number of rides:</b> <%= line_chart Trip.month_chart %></p>
  <p><b>Year by Year breakdown of number of rides:</b> <%= line_chart Trip.year_chart %></p>
  <p><b>Most ridden bike:</b> #<%= Trip.most_ridden_bike %> with <%= Trip.count_for_most_ridden_bike %> rides</p>
  <p><b>Least ridden bike:</b> #<%= Trip.least_ridden_bike %> with <%= Trip.count_for_least_ridden_bike %> rides</p>
  <p><b>Date with the highest number of trips:</b> <%= Trip.date_with_highest_trips %> with <%= Trip.count_of_highest_trips %> trips</p>
  <p><b>Date with the lowest number of trips:</b> <%= Trip.date_with_fewest_trips %> with <%= Trip.count_of_fewest_trips %> trips</p>
  <p><b>Weather on the day with the highest rides:</b></p>
  <p><%= Condition.weather_on_day_with_highest_rides.max_temperature %>°F <i>(max)</i> | <%= Condition.weather_on_day_with_highest_rides.mean_temperature %>°F <i>(mean)</i> | <%= Condition.weather_on_day_with_highest_rides.min_temperature %>°F <i>(min)</i> | <%= Condition.weather_on_day_with_highest_rides.mean_humidity %>% <i>(humidity)</i> | <%= Condition.weather_on_day_with_highest_rides.mean_visibility %> miles <i>(visibility)</i> | <%= Condition.weather_on_day_with_highest_rides.mean_windspeed %> mph <i>(windspeed)</i> | <%= Condition.weather_on_day_with_highest_rides.precipitation %> in <i>(precipitation)</i></p>
  <p><b>Weather on the day with the lowest rides:</b></p>
  <p><%= Condition.weather_on_day_with_lowest_rides.max_temperature %>°F <i>(max)</i> | <%= Condition.weather_on_day_with_lowest_rides.mean_temperature %>°F <i>(mean)</i> | <%= Condition.weather_on_day_with_lowest_rides.min_temperature %>°F <i>(min)</i> | <%= Condition.weather_on_day_with_lowest_rides.mean_humidity %>% <i>(humidity)</i> | <%= Condition.weather_on_day_with_lowest_rides.mean_visibility %> miles <i>(visibility)</i> | <%= Condition.weather_on_day_with_lowest_rides.mean_windspeed %> mph <i>(windspeed)</i> | <%= Condition.weather_on_day_with_lowest_rides.precipitation %> in <i>(precipitation)</i></p>
  <p><b>User subscription type breakout with both count and percentage:</b></p>
  <div id="piechart">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
    // Load google charts
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(drawChart);

    // Draw the chart and set the chart values
    function drawChart() {
      var data = google.visualization.arrayToDataTable([
        ['Subscription Type', 'Breakout'],
        ['Customer', <%= Trip.subscription_info["Customer"] %>],
        ['Subscriber', <%= Trip.subscription_info["Subscriber"] %>],
      ]);

      // Optional; add a title and set the width and height of the chart
      var options = {'title':'', 'width':500, 'height':200};

      // Display the chart inside the <div> element with id="piechart"
      var chart = new google.visualization.PieChart(document.getElementById('piechart'));
      chart.draw(data, options);
    }
    </script>
  </div>
  <h3> To view the analytics of an individual station, visit the <a href="/stations">station index</a> and view the station you'd like to receive analytics on.</h3>
</div>
